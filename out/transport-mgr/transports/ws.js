// Generated by CoffeeScript 1.6.3
var http, shoe,
  __slice = [].slice;

http = require('http');

shoe = require('shoe');

exports.parse = function(str) {
  var args, port;
  args = [];
  if (typeof str === 'string' && /^(.+?)(:(\d+))?(\/.+)$/.test(str)) {
    port = parseInt(RegExp.$3, 10);
    if (port) {
      args.push(port);
    }
    args.push(RegExp.$1);
    args.push(RegExp.$4);
  }
  return args;
};

exports.bindServer = function() {
  var args, callback, opts, pserver, s, sock, _i;
  callback = arguments[0], args = 3 <= arguments.length ? __slice.call(arguments, 1, _i = arguments.length - 1) : (_i = 1, []), opts = arguments[_i++];
  pserver = this;
  if (!opts) {
    pserver.err("Missing options");
  }
  if (args[0] instanceof http.Server) {
    s = args.shift();
  }
  if (!s) {
    s = http.createServer();
    s.listen.apply(s, args);
  }
  s.once('listening', function() {
    return callback({
      unbind: function(cb) {
        return s.close(cb);
      }
    });
  });
  sock = shoe(function(stream) {
    return pserver.handle(stream);
  });
  sock.install(s, opts);
};

exports.bindClient = function() {
  throw "bind client not supported in node";
};

/*
//@ sourceMappingURL=ws.map
*/
